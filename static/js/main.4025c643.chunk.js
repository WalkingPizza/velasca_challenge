(this.webpackJsonpvelasca_challenge=this.webpackJsonpvelasca_challenge||[]).push([[0],{133:function(e,t,c){},147:function(e,t,c){"use strict";c.r(t);var n,r=c(6),a=c(0),i=c.n(a),s=c(21),o=c.n(s),u=c(107),l=c(39),d=(c(133),c(103)),j=function e(t){Object(d.a)(this,e),this.id=void 0,this.title=void 0,this.price=void 0,this.category=void 0,this.description=void 0,this.image=void 0,this.id=t.id,this.title=t.title,this.price=Number(t.price),this.category=t.category,this.description=t.description,this.image=t.image},h=function e(t){var c=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(d.a)(this,e),this.product=void 0,this.quantity=void 0,this.changeQuantity=function(e){c.quantity+=e},this.product=t,this.quantity=n};!function(e){e[e.ASC=1]="ASC",e[e.DESC=2]="DESC"}(n||(n={}));var p=c(74),b=c.n(p),f=c(104),m=function(e){return e.ok?e.json():e.statusText},O=function(e){return e.map((function(e){return new j(e)}))},x=function(e){return JSON.stringify({userId:Math.floor(100*Math.random()),date:(new Date).toISOString().split("T")[0],products:e.map((function(e){return{productId:e.product.id,quantity:e.quantity}}))})},g=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://fakestoreapi.com/products").then(m).then(O));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://fakestoreapi.com/carts",{method:"POST",body:x(t)}).then(m).then((function(e){return!0})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=c(52),C=c(72),_=c(152),N=c(118),w=c(64),S=c(40),k=c(151),q=c(153),A=c(50),T=c(156),I=c(157),F=c(159),M=c(124),z=k.a.Meta,D=_.a.Paragraph;var E=function(e){var t=e.product,c=e.onMoreInformationClick,n=e.onAddToCart,i=Object(a.useState)(1),s=Object(l.a)(i,2),o=s[0],u=s[1],d=function(e){e<0&&1===o||u(o+e)};return Object(r.jsxs)(k.a,{className:"product",cover:Object(r.jsx)(q.a,{preview:!1,className:"product__image",src:t.image}),children:[Object(r.jsx)(z,{title:t.title,description:Object(r.jsx)(D,{ellipsis:{rows:2,expandable:!1,symbol:"..."},children:t.description})}),Object(r.jsxs)(w.a,{className:"product__information",justify:"space-between",align:"middle",children:[Object(r.jsxs)("div",{className:"product__price rounded-box",children:["$",t.price.toFixed(2)]}),Object(r.jsx)(A.a,{className:"product__more-info rounded-box--secondary",onClick:function(){return c(t)},children:"More info"})]}),Object(r.jsxs)(w.a,{align:"middle",style:{marginTop:"5px",flexWrap:"nowrap"},children:[Object(r.jsxs)(T.a.Group,{className:"product__qty-selector",children:[Object(r.jsx)(A.a,{className:"product__qty-button--minus",onClick:function(){return d(-1)},children:Object(r.jsx)(F.a,{})}),Object(r.jsx)(I.a,{readOnly:!0,className:"product__qty",value:o,min:1}),Object(r.jsx)(A.a,{className:"product__qty-button--plus",onClick:function(){return d(1)},children:Object(r.jsx)(M.a,{})})]}),Object(r.jsx)(A.a,{className:"product__cart-button",type:"primary",shape:"round",size:"large",onClick:function(){return n(t,o)},children:"Add to Cart"})]})]})},P=c(155),R=_.a.Title,$=_.a.Paragraph;var J=function(e){var t=e.product,c=e.onClose;return e.onAddToCart,Object(r.jsx)(P.a,{width:1e3,centered:!0,visible:!0,footer:null,onCancel:c,children:Object(r.jsxs)(w.a,{justify:"space-between",children:[Object(r.jsx)(S.a,{lg:{span:6,offset:0},xs:{span:12,offset:6},children:Object(r.jsx)(q.a,{src:t.image,className:"product-modal__picture"})}),Object(r.jsxs)(S.a,{lg:16,xs:24,className:"product-modal__content",children:[Object(r.jsx)(R,{level:2,style:{marginBottom:0},children:t.title}),Object(r.jsx)(R,{level:5,className:"product__category",children:t.category}),Object(r.jsx)($,{children:t.description})]})]})})};var Q=function(e){var t=e.onSearch;return Object(r.jsx)(T.a,{size:"large",className:"searchbar",placeholder:"Search a product...",onChange:function(e){return t(e.target.value)}})},B=c(160);var L=function(e){var t=e.items,c=e.onClick;return Object(r.jsxs)(w.a,{align:"middle",justify:"end",className:"cart",onClick:c,children:[Object(r.jsx)(B.a,{className:"cart__icon",style:{fontSize:30}}),Object(r.jsx)("span",{className:"cart__count",children:t.reduce((function(e,t){return e+t.quantity}),0)||0})]})},Y=c(154),G=c(158),V=_.a.Text,W=_.a.Paragraph;var H=function(e){var t=e.isOpen,c=e.items,n=e.onClose,a=e.onRemoveFromCart,i=e.onCheckout;return Object(r.jsx)(G.a,{className:"cart-drawer",title:"Your cart",placement:"right",closable:!0,onClose:n,visible:t,footer:c.length>0&&Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(w.a,{align:"middle",justify:"space-between",children:[Object(r.jsxs)("div",{className:"cart-drawer__subtotal",children:["Subtotal:"," ",Object(r.jsxs)(V,{strong:!0,className:"text--highlight",children:["$",c.reduce((function(e,t){return e+t.product.price*t.quantity}),0)]})]}),Object(r.jsx)(A.a,{type:"primary",size:"large",onClick:i,children:"Continue to Checkout"})]})}),children:c.length>0&&Object(r.jsx)(Y.b,{dataSource:c,renderItem:function(e){return Object(r.jsxs)(Y.b.Item,{className:"cart-drawer__product",children:[Object(r.jsx)(Y.b.Item.Meta,{avatar:Object(r.jsx)(q.a,{className:"cart-drawer__product-image",src:e.product.image,preview:!1}),title:e.product.title,description:Object(r.jsxs)(W,{children:["Quantity: ",e.quantity,Object(r.jsx)("br",{}),"Price: $",e.product.price.toFixed(2)]})}),Object(r.jsxs)(S.a,{className:"cart-drawer__actions",children:[Object(r.jsxs)(V,{strong:!0,className:"text--highlight",style:{fontSize:"120%",marginRight:"10px"},children:["$",(e.product.price*e.quantity).toFixed(2)]}),Object(r.jsx)(A.a,{className:"cart-drawer__button",type:"primary",shape:"round",size:"large",onClick:function(){return a(e.product)},children:"Remove from Cart"})]})]})}})||Object(r.jsx)("p",{children:"Your cart is empty."})})},K=C.a.Option,U=_.a.Text;var X=function(){var e=Object(a.useState)(!0),t=Object(l.a)(e,2),c=t[0],i=t[1],s=Object(a.useState)([]),o=Object(l.a)(s,2),d=o[0],j=o[1],p=Object(a.useState)(),b=Object(l.a)(p,2),f=b[0],m=b[1],O=Object(a.useState)(),x=Object(l.a)(O,2),_=x[0],k=x[1],q=Object(a.useState)(""),A=Object(l.a)(q,2),T=A[0],I=A[1],F=Object(a.useState)([]),M=Object(l.a)(F,2),z=M[0],D=M[1],P=Object(a.useState)(!1),R=Object(l.a)(P,2),$=R[0],B=R[1],Y=Object(a.useState)(n.ASC),G=Object(l.a)(Y,2),V=G[0],W=G[1],X=Object(r.jsx)(y.a,{style:{fontSize:24},spin:!0}),Z=function(e){return Object(r.jsx)(E,{product:e,onMoreInformationClick:te,onAddToCart:ce},e.id)},ee=function(){B(!$)},te=function(e){m(e)},ce=function(e){var t,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(d.some((function(t){return t.product.id===e.id}))){var n=(t=Object(u.a)(d)).findIndex((function(t){return t.product.id===e.id}));t[n].changeQuantity(c)}else t=[].concat(Object(u.a)(d),[new h(e,c)]);j(t),B(!0)},ne=function(e){j(d.filter((function(t){return t.product.id!==e.id})))};return Object(a.useEffect)((function(){_||(i(!0),g().then((function(e){k(e),i(!1)})))}),[_]),Object(r.jsxs)("div",{className:c?"ecomm-container ecomm-container--is-loading":"ecomm-container",children:[c&&Object(r.jsx)(N.a,{indicator:X}),_&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(w.a,{className:"header",justify:"space-between",children:[Object(r.jsx)(S.a,{lg:20,xs:18,children:Object(r.jsx)(Q,{onSearch:function(e){I(e)}})}),Object(r.jsx)(S.a,{span:4,children:Object(r.jsx)(L,{items:d,onRemoveFromCart:ne,onClick:ee})})]}),Object(r.jsxs)(w.a,{className:"filters",justify:"space-between",children:[Object(r.jsx)(S.a,{lg:10,xs:24,children:Object(r.jsx)(C.a,{maxTagCount:"responsive",mode:"tags",placeholder:"Filter by Category",onChange:function(e){D(e)},showArrow:!0,allowClear:!0,className:"filters__category",children:_.map((function(e){return e.category})).filter((function(e,t,c){return c.indexOf(e)===t})).map((function(e,t){return Object(r.jsx)(K,{value:e,children:e},t)}))})}),Object(r.jsx)(S.a,{lg:{span:9,offset:1},xs:24,children:Object(r.jsxs)(w.a,{align:"middle",justify:"end",className:"filters__row--second",children:[Object(r.jsx)(U,{style:{marginRight:"10px"},children:"Sort by Price"}),Object(r.jsxs)(C.a,{onChange:function(e){W(e)},showArrow:!0,allowClear:!0,className:"filters__sorting",defaultValue:V,children:[Object(r.jsx)(K,{value:n.ASC,children:"Ascending"},n.ASC),Object(r.jsx)(K,{value:n.DESC,children:"Descending"},n.DESC)]})]})})]}),Object(r.jsx)(w.a,{className:"product-container",align:"stretch",children:_&&function(){var e=_.filter((function(e){return e.title.toLowerCase().includes(T.toLowerCase())}));return z.length>0&&(e=e.filter((function(e){return z.includes(e.category)}))),V&&(e=e.sort((function(e,t){return V===n.DESC?t.price-e.price:e.price-t.price}))),e.length>0?e.map(Z):Object(r.jsxs)("p",{children:["No products matching ",T,z.length>0&&" in ".concat(z.join(", ")),"."]})}()}),Object(r.jsx)(H,{isOpen:$,onClose:ee,onRemoveFromCart:ne,items:d,onCheckout:function(){v(d).then((function(e){return console.log("Checkout Completed")}))}})]}),f&&Object(r.jsx)(J,{product:f,onClose:function(){m(void 0)},onAddToCart:ce})]})};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(X,{})}),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.4025c643.chunk.js.map